{"version":3,"file":"grouped-locations-map-6a6754ec.js","sources":["../../src/components/info-panel/InfoPanel.tsx","../../src/components/GroupedLocationsMap.tsx","../../src/grouped-locations-map.tsx"],"sourcesContent":["import {joinClassNames} from '../../libs/helper.ts'\nimport {MapLocationProps} from '../../types'\n\ntype Props = {\n    mapLocationProps?: MapLocationProps\n    onClose?: () => void\n}\n\nexport default function InfoPanel(props: Props) {\n    const {\n        mapLocationProps: location,\n        onClose,\n    } = props\n\n    return (\n        <div className={joinClassNames('info-panel-wrap', location ? 'slide-up' : '')}>\n            <div className=\"info-panel\">\n                {location && (\n                    <>\n                        <section className=\"header\">\n                            <h3>{location.alt_title.length > 0 ? location.alt_title : location.title}</h3>\n                            <span className=\"close\" onClick={() => {\n                                onClose && onClose()\n                            }}>&times;</span>\n                        </section>\n                        <section className=\"body\">\n                            <address>\n                                <span className=\"address\">üìç {location.address}</span>\n                                {location.telephone &&\n                                    <span className=\"telephone\">‚òéÔ∏è <a href={`tel://${location.telephone}`}>02-955-3348</a></span>}\n                                {location.url &&\n                                    <span className=\"url\">üîó <a href={location.url} target=\"_blank\" rel=\"extermal nofollow noreferrer\">ÎßÅÌÅ¨</a></span>}\n                            </address>\n                        </section>\n                    </>\n                )}\n            </div>\n        </div>\n    )\n}\n","import {useState} from 'react'\nimport {__} from '@wordpress/i18n'\n// Ours\nimport InfoPanel from './info-panel/InfoPanel.tsx'\nimport NaverMap from './map/NaverMap.tsx'\nimport Marker from './map/Marker.tsx'\nimport {getCenter, getIconSize} from '../libs/helper.ts'\n// Types.\nimport {GroupedLocationMapObjectValue, MapLocationProps} from '../types'\n// Styles.\nimport '../styles/grouped-locations-map.css'\n\ntype Props = GroupedLocationMapObjectValue\n\nconst {\n    size,\n    scaledSize,\n    origin,\n    anchor,\n} = getIconSize()\n\nexport default function GroupedLocationMap(props: Props) {\n    const {\n        atts: {\n            height,\n            post_id,\n            width,\n            zoom,\n        },\n        data,\n        mapIcons: {\n            normal: normalMarker,\n            selected: selectedMarker,\n        },\n    } = props\n\n    const [map, setMap] = useState<naver.maps.Map | null>(null),\n        [selected, setSelected] = useState<number>(-1)\n\n    if (0 === data.length) {\n        return (\n            <div className=\"naver-map error-message\">\n                {__('[ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ ÏóêÎü¨] ÏßÄÎèÑÏóê ÏúÑÏπòÍ∞Ä ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.', 'naver_maps')}\n            </div>\n        )\n    }\n\n    return (\n        <>\n            <NaverMap\n                id={`naver-map-${post_id}`}\n                className={`naver-map grouped-locations-map grouped-locations-map-${post_id}`}\n                mapOptions={{\n                    center: getCenter(data.map((loc) => loc.coord)),\n                    disableKineticPan: false,\n                    zoom: zoom,\n                }}\n                ref={(_map: naver.maps.Map | null) => setMap(() => _map)}\n                style={{\n                    height,\n                    width,\n                }}\n            >\n                {map && data.map((location: MapLocationProps, index: number) => {\n                    return (\n                        <Marker\n                            key={location.id}\n                            markerOptions={{\n                                icon: {\n                                    anchor,\n                                    origin,\n                                    scaledSize,\n                                    size,\n                                    url: index === selected ? selectedMarker : normalMarker,\n                                },\n                                map: map,\n                                position: location.coord,\n                                title: location.alt_title.length > 0 ? location.alt_title : location.title,\n                            }}\n                            onClick={() => {\n                                if (index === selected) {\n                                    setSelected(-1)\n                                } else {\n                                    setSelected(index)\n                                }\n                            }}\n                        />\n                    )\n                })}\n            </NaverMap>\n            <InfoPanel\n                mapLocationProps={selected > -1 ? data[selected] : undefined}\n                onClose={() => setSelected(-1)}\n            />\n        </>\n    )\n}\n","// Vite.\nimport 'vite/modulepreload-polyfill'\n// Library.\nimport {StrictMode} from 'react'\nimport {createRoot} from 'react-dom/client'\n// Src.\nimport GroupedLocationsMap from './components/GroupedLocationsMap.tsx'\nimport {l10nHelper} from './libs/helper.ts'\n// Types\nimport {GroupedLocationMapObjectValue} from './types'\n\nl10nHelper('shoplic-integration-for-naver-map')\ndocument.querySelectorAll<HTMLDivElement>(\n    '[data-shoplic-naver-map-app-root=\"true\"][data-map_type=\"grouped-locations-map\"]',\n).forEach((appRoot: HTMLDivElement) => {\n    let objectName: string | null = null\n    if ('object_name_postfix' in appRoot.dataset) {\n        objectName = 'groupedLocationsMap_' + appRoot.dataset.object_name_postfix\n        if (objectName in window) {\n            const objectValue = window[objectName] as GroupedLocationMapObjectValue\n            console.log(objectName, objectValue)\n            createRoot(appRoot).render(\n                <StrictMode>\n                    <GroupedLocationsMap {...objectValue}/>\n                </StrictMode>\n            )\n        }\n    }\n})\n"],"names":["jsx","jsxs","Fragment","useState","StrictMode","GroupedLocationsMap"],"mappings":"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"}